<script src="/socket.io/socket.io.js"></script>
<script>
io = io.connect()
//io.emit('ready') 
// Listen for the talk event.
io.on('talk', function(data) {
    alert(data.message)
})  

function clean(){
  $("#editor").text("");
  $("#editor").val("");
  $("#editor").focus();
}
function trans(){
  io.emit('trans', $("#editor").val());
}

</script>

<style>
#editor{
font-size: 22;
text-align: right;
}
#branah-keyboard{
	width:630px;
	line-height:20px;
	font-size:1em
}

.branah-key,#branah-backspace,#branah-tab,#branah-k25,#branah-caps-lock,#branah-enter,#branah-left-shift,#branah-right-shift,#branah-space,#branah-left-ctrl,#branah-right-ctrl,#branah-left-alt,#branah-right-alt,#branah,#branah-escape{
	float:left;
	display:block;
	margin:1px;
	height:3em;
	line-height:2.75em;
	text-align:center;
	color:gray
}

.branah-key{
	width:40px
}

#branah-backspace{
	width:78px
}

#branah-tab{
	width:62px
}

#branah-k25{
	width:56px
}

#branah-caps-lock{
	width:76px
}

#branah-enter{
	width:84px
}

#branah-left-shift{
	width:46px
}

#branah-right-shift{
	width:114px
}

#branah-space{
	width:246px;
	text-align:center
}

#branah-right-ctrl,#branah-right-alt,#branah-escape{
	width:62px
}

#branah-left-ctrl,#branah-left-alt,#branah{
	width:60px
}

.branah-label-reference{
	color:gray;
	font-size:.9em;
	line-height:12px;
	text-align:left;
	cursor:default
}

.branah-label-natural{
	margin-top:-5px;
	color:#e0115f;
	line-height:20px;
	text-align:center;
	cursor:default
}

.branah-label-shift{
	margin-top:-5px;
	color:#057cb5;
	line-height:20px;
	text-align:center;
	cursor:default
}

#branah-k29 .branah-label-reference,#branah-k32 .branah-label-reference{
	color:#000
}

.branah-recessed span{
	color:#3C0
}

.branah-recessed-hover span{
	color:#ffd800
}

.branah-clear{
	clear:both
}
</style>
<textarea id="editor" name="editor" rows="7" cols="47">
</textarea>
<script src='//code.jquery.com/jquery-2.1.0.min.js'></script>
<p id="action"><button id="clearAll" onClick="clean()">Borrar Todo</button>  
<button onClick="trans()">Traducir</button>
  
<div id="keyboard"><div id="branah-keyboard"><button id="branah-k0" class="branah-key"><div class="branah-label-reference">`</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ذ</div></button><button id="branah-k1" class="branah-key"><div class="branah-label-reference">1</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;١</div></button><button id="branah-k2" class="branah-key"><div class="branah-label-reference">2</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٢</div></button><button id="branah-k3" class="branah-key"><div class="branah-label-reference">3</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٣</div></button><button id="branah-k4" class="branah-key"><div class="branah-label-reference">4</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٤</div></button><button id="branah-k5" class="branah-key"><div class="branah-label-reference">5</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٥</div></button><button id="branah-k6" class="branah-key"><div class="branah-label-reference">6</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٦</div></button><button id="branah-k7" class="branah-key"><div class="branah-label-reference">7</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٧</div></button><button id="branah-k8" class="branah-key"><div class="branah-label-reference">8</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٨</div></button><button id="branah-k9" class="branah-key"><div class="branah-label-reference">9</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٩</div></button><button id="branah-k10" class="branah-key"><div class="branah-label-reference">0</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;٠</div></button><button id="branah-k11" class="branah-key"><div class="branah-label-reference">-</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;-</div></button><button id="branah-k12" class="branah-key"><div class="branah-label-reference">=</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;=</div></button><button id="branah-backspace"><span>Backspace</span></button><div class="branah-clear"></div><button id="branah-tab"><span>Tab</span></button><button id="branah-k13" class="branah-key"><div class="branah-label-reference">q</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ض</div></button><button id="branah-k14" class="branah-key"><div class="branah-label-reference">w</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ص</div></button><button id="branah-k15" class="branah-key"><div class="branah-label-reference">e</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ث</div></button><button id="branah-k16" class="branah-key"><div class="branah-label-reference">r</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ق</div></button><button id="branah-k17" class="branah-key"><div class="branah-label-reference">t</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ف</div></button><button id="branah-k18" class="branah-key"><div class="branah-label-reference">y</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;غ</div></button><button id="branah-k19" class="branah-key"><div class="branah-label-reference">u</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ع</div></button><button id="branah-k20" class="branah-key"><div class="branah-label-reference">i</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ه</div></button><button id="branah-k21" class="branah-key"><div class="branah-label-reference">o</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;خ</div></button><button id="branah-k22" class="branah-key"><div class="branah-label-reference">p</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ح</div></button><button id="branah-k23" class="branah-key"><div class="branah-label-reference">[</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ج</div></button><button id="branah-k24" class="branah-key"><div class="branah-label-reference">]</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;د</div></button><button id="branah-k25"><div class="branah-label-reference">\</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;\</div></button><div class="branah-clear"></div><button id="branah-caps-lock"><span>Caps Lock</span></button><button id="branah-k26" class="branah-key"><div class="branah-label-reference">a</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ش</div></button><button id="branah-k27" class="branah-key"><div class="branah-label-reference">s</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;س</div></button><button id="branah-k28" class="branah-key"><div class="branah-label-reference">d</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ي</div></button><button id="branah-k29" class="branah-key"><div class="branah-label-reference">f</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ب</div></button><button id="branah-k30" class="branah-key"><div class="branah-label-reference">g</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ل</div></button><button id="branah-k31" class="branah-key"><div class="branah-label-reference">h</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ا</div></button><button id="branah-k32" class="branah-key"><div class="branah-label-reference">j</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ت</div></button><button id="branah-k33" class="branah-key"><div class="branah-label-reference">k</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ن</div></button><button id="branah-k34" class="branah-key"><div class="branah-label-reference">l</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;م</div></button><button id="branah-k35" class="branah-key"><div class="branah-label-reference">;</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ك</div></button><button id="branah-k36" class="branah-key"><div class="branah-label-reference">'</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ط</div></button><button id="branah-enter" class="branah-enter"><span>Enter</span></button><div class="branah-clear"></div><button id="branah-left-shift"><span>Shift</span></button><button id="branah-k47" class="branah-key"><div class="branah-label-reference">\</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;‍</div></button><button id="branah-k37" class="branah-key"><div class="branah-label-reference">z</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ئ</div></button><button id="branah-k38" class="branah-key"><div class="branah-label-reference">x</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ء</div></button><button id="branah-k39" class="branah-key"><div class="branah-label-reference">c</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ؤ</div></button><button id="branah-k40" class="branah-key"><div class="branah-label-reference">v</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ر</div></button><button id="branah-k41" class="branah-key"><div class="branah-label-reference">b</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;لا</div></button><button id="branah-k42" class="branah-key"><div class="branah-label-reference">n</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ى</div></button><button id="branah-k43" class="branah-key"><div class="branah-label-reference">m</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ة</div></button><button id="branah-k44" class="branah-key"><div class="branah-label-reference">,</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;و</div></button><button id="branah-k45" class="branah-key"><div class="branah-label-reference">.</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ز</div></button><button id="branah-k46" class="branah-key"><div class="branah-label-reference">/</div><div class="branah-label-natural" style="font-size:22px;">&nbsp;ظ</div></button><button id="branah-right-shift"><span>Shift</span></button><div class="branah-clear"></div><button id="branah-left-ctrl"><span>Ctrl</span></button><button id="branah"><span>branah</span></button><button id="branah-left-alt"><span>Alt</span></button><button id="branah-space"><span>Space</span></button><button id="branah-right-alt"><span>Alt</span></button><button id="branah-escape" title="Turn on/off keyboard input conversion"><span>Esc</span></button><button id="branah-right-ctrl"><span>Ctrl</span></button><div class="branah-clear"></div></div></div>

<script>
$("#branah-space").click(function() {
  $("#editor").val(function(_, val){
    return val + " ";
  }); 
});

$(".branah-key").click(function() {
  var txt = $.trim($(this).children().last().text());
  console.log(txt);

  $("#editor").val(function(_, val){
    return val + txt; 
  }); 
});
</script>
